MIPSysY Compiler
===

## 词法分析

词法分析的本质是构造有限状态机扫描字符串，提取单词。本编译器采用正则表达式来提取。

基本架构是：
1. 对于每一种单词，构造一个对应的正则表达式；
2. 采用 `|` 将所有正则表达式按优先级串接起来，形成一个正则表达式：其中优先级是指
   1. 长串优先
   2. 关键字优先

首先构造映射 `Map<Token.Type, Pattern>`，随后遍历映射表并构造 `Pattern`：

```java
final Optional<String> make = Token.typePatterns.entrySet().stream()
                .map(e -> "(?<" + e.getKey().toString() + ">" + e.getValue() + ")")
                .reduce((s1, s2) -> s1 + "|" + s2);
```

随后通过 `match` 方法即可提取内容。

## 语法分析

语法分析的本质是构造递归下降程序，分析语法成分。本编译器中的 `ParserController` 内置的所有方法就是完成了递归下降分析。通过递归下降，可以得到具体语法树。

## 语义分析（错误处理）

首先通过将具体语法树转化为抽象语法树。

错误处理：
1. 词法分析阶段，检查字符串的格式问题；
2. 语法分析阶段，检查文法匹配问题；
3. 通过维护符号表 `SymbolTable` 来检查标识符名的使用问题、函数传参的问题。

遍历 AST 的过程中，符号表是动态变化的，每一个语法要素都接受一个 `SymbolTable` 并返回一个新的 `SymbolTable`：
1. 声明、函数定义会使得符号表顶层发生变化；
2. 引入新的作用域时，将使得符号表引入新的层。

这个符号表的本质是栈式符号表。